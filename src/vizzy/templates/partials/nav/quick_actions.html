{#
   Quick Actions Menu Component
   Phase 8H-001: Unified navigation system

   Usage:
   {% include "partials/nav/quick_actions.html" %}

   Required context:
   - import_info: Import object with id (optional, hides import-specific actions if not provided)
   - node: Node object (optional, for node-specific actions)
#}

<div class="nav-quick-actions" x-data="{ open: false }">
    <button type="button"
            class="nav-quick-actions-btn"
            @click="open = !open"
            @keydown.escape="open = false"
            aria-haspopup="true"
            :aria-expanded="open">
        <svg class="nav-link-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
        <span>Actions</span>
        <svg class="nav-link-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"
             :class="{ 'rotate-180': open }" style="transition: transform 0.15s ease;" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
        </svg>
    </button>

    <div class="nav-quick-actions-menu"
         :class="{ 'open': open }"
         @click.outside="open = false"
         role="menu"
         aria-label="Quick actions">

        {# Views Section #}
        {% if import_info %}
        <div class="nav-quick-actions-section">
            <div class="nav-quick-actions-label">Views</div>
            <a href="/explore/{{ import_info.id }}" class="nav-quick-action" role="menuitem">
                <svg class="nav-quick-action-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>
                </svg>
                <span class="nav-quick-action-text">Explore</span>
            </a>
            <a href="/dashboard/{{ import_info.id }}" class="nav-quick-action" role="menuitem">
                <svg class="nav-quick-action-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                </svg>
                <span class="nav-quick-action-text">Dashboard</span>
            </a>
            <a href="/treemap/{{ import_info.id }}" class="nav-quick-action" role="menuitem">
                <svg class="nav-quick-action-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"/>
                </svg>
                <span class="nav-quick-action-text">Treemap</span>
            </a>
        </div>

        {# Analysis Section #}
        <div class="nav-quick-actions-section">
            <div class="nav-quick-actions-label">Analysis</div>
            <a href="/analyze/duplicates/{{ import_info.id }}" class="nav-quick-action" role="menuitem">
                <svg class="nav-quick-action-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
                <span class="nav-quick-action-text">Duplicates</span>
            </a>
            <a href="/analyze/path/{{ import_info.id }}" class="nav-quick-action" role="menuitem">
                <svg class="nav-quick-action-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                </svg>
                <span class="nav-quick-action-text">Path Finder</span>
            </a>
            <a href="/analyze/loops/{{ import_info.id }}" class="nav-quick-action" role="menuitem">
                <svg class="nav-quick-action-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
                <span class="nav-quick-action-text">Circular Deps</span>
            </a>
            <a href="/analyze/redundant/{{ import_info.id }}" class="nav-quick-action" role="menuitem">
                <svg class="nav-quick-action-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M13 10V3L4 14h7v7l9-11h-7z"/>
                </svg>
                <span class="nav-quick-action-text">Redundant Links</span>
            </a>
            {% if node %}
            <a href="/analyze/why/{{ import_info.id }}/{{ node.id }}" class="nav-quick-action" role="menuitem">
                <svg class="nav-quick-action-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <span class="nav-quick-action-text">Why Chain</span>
            </a>
            {% endif %}
        </div>
        {% endif %}

        {# Compare Section #}
        <div class="nav-quick-actions-section">
            <div class="nav-quick-actions-label">Compare</div>
            <a href="/compare{% if import_info %}?left={{ import_info.id }}{% endif %}" class="nav-quick-action" role="menuitem">
                <svg class="nav-quick-action-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
                </svg>
                <span class="nav-quick-action-text">Compare Hosts</span>
            </a>
            <a href="/baselines" class="nav-quick-action" role="menuitem">
                <svg class="nav-quick-action-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/>
                </svg>
                <span class="nav-quick-action-text">Baselines</span>
            </a>
        </div>

        {# Help Section #}
        <div class="nav-quick-actions-section">
            <div class="nav-quick-actions-label">Help</div>
            <button type="button"
                    class="nav-quick-action"
                    onclick="window.vizzyKeyboardNav && window.vizzyKeyboardNav.toggleHelpModal()"
                    role="menuitem">
                <svg class="nav-quick-action-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                          d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <span class="nav-quick-action-text">
                    Keyboard Shortcuts
                    <span class="nav-help-kbd">?</span>
                </span>
            </button>
        </div>
    </div>
</div>
